# 製品シェア要因分析ツール

CSVファイルをアップロードして製品シェアの要因を統計的に分析するWebアプリケーションです。

## 機能

- **相関分析**: Pearson相関係数による変数間の関係性分析
- **重回帰分析**: 複数要因の影響度を同時に評価
- **主成分分析(PCA)**: データの次元削減と重要な特徴の抽出
- **決定木分析**: 変数の重要度と分岐ルールの抽出
- **インタラクティブな可視化**: Plotlyによる動的なグラフ表示
- **レポート生成**: 分析結果のサマリーとダウンロード機能

## インストール

```bash
# 必要なライブラリをインストール
pip install -r requirements.txt
```

## 使い方

### Webアプリケーションとして起動

```bash
streamlit run app.py
```

ブラウザが自動的に開き、以下のURLでアプリケーションにアクセスできます：
`http://localhost:8501`

### 使用手順

1. 左サイドバーの「データアップロード」からCSVファイルを選択
2. 文字エンコーディングを選択（日本語CSVの場合は'shift-jis'）
3. ターゲット変数（目的変数）を選択
4. 説明変数（独立変数）を選択
5. 「分析を実行」ボタンをクリック
6. 各タブで分析結果を確認

## ファイル構成

- `app.py` - StreamlitによるWebアプリケーション
- `share_analyzer.py` - コマンドライン版の分析ツール
- `analyze_data.py` - 既存データ用の分析スクリプト
- `requirements.txt` - 必要なPythonライブラリ
- `ダミーデータ（CSV）.csv` - サンプルデータ

## 分析手法

### 1. 相関分析
- 製品シェアと各要因の線形関係の強さを測定
- p値による統計的有意性の検定

### 2. 重回帰分析
- 複数の要因が製品シェアに与える影響を同時に分析
- R²スコアによるモデルの説明力評価
- 回帰係数による各変数の影響度の定量化

### 3. 主成分分析（PCA）
- 多数の変数を少数の主成分に圧縮
- データの次元削減と重要な特徴の抽出

### 4. 決定木分析
- 変数の組み合わせによる分岐ルールを抽出
- 変数重要度による各要因の貢献度評価

## 必要なデータ形式

CSVファイルには以下のような列が含まれることを想定：

- **ターゲット変数**: 製品シェア、売上シェアなど（数値）
- **説明変数**: 価格、広告費、流通数、顧客満足度など（数値）

## トラブルシューティング

- **文字化け**: エンコーディング設定を変更（shift-jis, utf-8など）
- **エラー**: 数値データが正しく認識されているか確認
- **分析失敗**: 欠損値が多すぎないか確認